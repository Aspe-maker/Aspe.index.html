<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>انفجار القلب وحرف F</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>

<canvas id="heartCanvas"></canvas>

<script>
const canvas = document.getElementById('heartCanvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
const particleCount = 600; 
let stage = 0; // 0: قلب، 1: انكماش، 2: حرف F
let progress = 0;

// معادلة رسم القلب
function getHeartPoint(t) {
    let x = 16 * Math.pow(Math.sin(t), 3);
    let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
    return { x: x * 15, y: y * 15 };
}

// معادلة رسم حرف F
function getFPoint(t) {
    let x, y;
    if (t < 0.4) { // الخط العامودي
        x = -50;
        y = -100 + (t / 0.4) * 200;
    } else if (t < 0.7) { // الخط الأفقي العلوي
        x = -50 + ((t - 0.4) / 0.3) * 100;
        y = -100;
    } else { // الخط الأفقي الأوسط
        x = -50 + ((t - 0.7) / 0.3) * 80;
        y = 0;
    }
    return { x: x, y: y };
}

class Particle {
    constructor() {
        this.reset();
    }

    reset() {
        this.x = canvas.width / 2;
        this.y = canvas.height / 2;
        this.targetX = this.x;
        this.targetY = this.y;
        this.color = `hsl(${Math.random() * 20 + 340}, 100%, 60%)`; // درجات الوردي والأحمر
        this.size = Math.random() * 2 + 1;
        this.speed = 0.05 + Math.random() * 0.02;
    }

    update() {
        // حركة ناعمة نحو الهدف
        this.x += (this.targetX - this.x) * this.speed;
        this.y += (this.targetY - this.y) * this.speed;
    }

    draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
    }
}

function init() {
    for (let i = 0; i < particleCount; i++) {
        particles.push(new Particle());
    }
}

function animate() {
    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; // تأثير التلاشي (Tail)
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    progress += 0.01;

    if (progress > 2) {
        progress = 0;
        stage = (stage + 1) % 3;
    }

    particles.forEach((p, i) => {
        let t = (i / particleCount) * Math.PI * 2;
        let target;

        if (stage === 0) { // تشكيل القلب
            target = getHeartPoint(t);
            p.targetX = canvas.width / 2 + target.x;
            p.targetY = canvas.height / 2 + target.y;
            p.color = '#ff3e6c';
        } else if (stage === 1) { // انكماش للمركز
            p.targetX = canvas.width / 2;
            p.targetY = canvas.height / 2;
        } else if (stage === 2) { // تشكيل حرف F
            let ft = i / particleCount;
            target = getFPoint(ft);
            p.targetX = canvas.width / 2 + target.x;
            p.targetY = canvas.height / 2 + target.y;
            p.color = '#3e9cff'; // تغيير اللون للأزرق عند حرف F
        }

        p.update();
        p.draw();
    });

    requestAnimationFrame(animate);
}

init();
animate();

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>
